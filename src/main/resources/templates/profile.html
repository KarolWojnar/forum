<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <link rel="stylesheet" th:href="@{/static/css/output.css}">
</head>
<body>

<div th:replace="~{fragments/header :: header}"></div>

<div class="container mx-auto p-6">
    <div class="max-w-md mx-auto py-2 auto-dismiss" th:if="${error} or ${success}">
        <div th:if="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative shadow-2xl" role="alert">
            <span class="block sm:inline" th:text="${error}"></span>
        </div>
        <div th:if="${success}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative shadow-2xl" role="alert">
            <span class="block sm:inline" th:text="${success}"></span>
        </div>
    </div>
    <div class="bg-white p-8 rounded-xl shadow-xl max-w-4xl mx-auto">
        <h2 class="text-3xl font-semibold text-center mb-6">Your Profile</h2>

        <form th:action="@{/users}" method="post">
            <div class="space-y-6">
                <div>
                    <label for="username" class="block text-lg font-semibold text-gray-700">Username</label>
                    <input
                            type="text"
                            id="username"
                            name="username"
                            th:value="${user.username}"
                            class="mt-2 p-3 w-full rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            required
                    />
                </div>
                <div>
                    <label for="email" class="block text-lg font-semibold text-gray-700">Email</label>
                    <input
                            type="email"
                            id="email"
                            name="email"
                            th:value="${user.email}"
                            class="mt-2 p-3 w-full rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            disabled
                    />
                </div>
                <div>
                    <label for="role" class="block text-lg font-semibold text-gray-700">Role</label>
                    <input
                            type="text"
                            id="role"
                            name="role"
                            th:value="${user.role}"
                            class="mt-2 p-3 w-full rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                            disabled
                    />
                </div>
                <div class="flex justify-center">
                    <button
                            type="submit"
                            class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                        Update Username
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        dismissAlert(document.querySelectorAll('.auto-dismiss'));
    });

    function dismissAlert(alerts) {
        alerts.forEach(function(alert) {
            setTimeout(function() {
                alert.style.transition = 'opacity 0.5s ease-in-out';
                alert.style.opacity = '0';

                setTimeout(function() {
                    alert.remove();
                }, 500);
            }, 3000);
        });
    }
</script>
</html>
